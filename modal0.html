<!-- ========= modal0.html (Проект 2) ========= -->
<div id="modal0-container">
  <style>
  .settings-wrapper { padding:20px; }
  .company-block {
    height:100px;
    display:flex;
    align-items:center;
    gap:20px;
    border-bottom:1px solid #ccc;
  }
  .company-block input {
    padding:4px 8px;
  }
  .users-block { margin-top:20px; }
  .users-block table { width:100%; border-collapse:collapse; }
  .users-block th, .users-block td { padding:8px; border:1px solid #ddd; }
  .users-block th { background:#f0f0f0; }
  .users-block button { margin-right:5px; }
 </style>
  <div class="settings-wrapper">
    <div class="company-block">
      <span>Company ID: <strong id="company-id">0000</strong></span>
      <label>Company NAME:
        <input type="text" id="company-name" placeholder="Название компании">
      </label>
    </div>

 <div class="users-block">
      <h3>Users</h3>
      <table id="users-table">
        <thead>
          <tr>
            <th>Login</th>
            <th>Email</th>
            <th>Access</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><input type="text" value="user1"></td>
            <td><input type="email" value="user1@example.com"></td>
            <td>
              <label><input type="checkbox">PAGE 1</label>
              <label><input type="checkbox">PAGE 2</label>
              <label><input type="checkbox">TASKS</label>
            </td>
            <td>
              <button class="edit-user">Edit</button>
              <button class="delete-user">Delete</button>
            </td>
          </tr>
        </tbody>
      </table>
      <button id="add-user-btn">Add User</button>
    </div>
  </div>
</div>
<script type="module">
export function initModal0() {
  const root = document.getElementById('modal0-container');
  const companyIdElem = root.querySelector('#company-id');
  const companyNameInput = root.querySelector('#company-name');
  if (companyIdElem && window.companyId) {
    companyIdElem.textContent = window.companyId;
  }
  if (companyNameInput && window.companyName) {
    companyNameInput.value = window.companyName;
  }
  root.querySelector('#add-user-btn').addEventListener('click', function() {
    const tbody = root.querySelector('#users-table tbody');
    const row = document.createElement('tr');
    row.innerHTML = `
      <td><input type="text"></td>
      <td><input type="email"></td>
      <td>
        <label><input type="checkbox">PAGE 1</label>
        <label><input type="checkbox">PAGE 2</label>
        <label><input type="checkbox">TASKS</label>
      </td>
      <td>
        <button class="edit-user">Edit</button>
        <button class="delete-user">Delete</button>
      </td>`;
    tbody.appendChild(row);
  });

  root.querySelector('#users-table').addEventListener('click', function(e) {
    if (e.target.classList.contains('delete-user')) {
      e.target.closest('tr').remove();
    }
  });
  console.log('initModal0', window.supabase, window.USER_KEY);
}
initModal0();
</script>
